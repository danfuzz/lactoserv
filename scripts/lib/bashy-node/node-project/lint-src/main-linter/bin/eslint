#!/bin/bash
#
# Copyright 2022-2023 the Bashy-lib Authors (Dan Bornstein et alia).
# SPDX-License-Identifier: Apache-2.0

# Figure out the symlink-resolved program name and directory.
cmdName="$(readlink -f "$0")" || exit "$?"
cmdDir="${cmdName%/*}"
cmdName="${cmdName##*/}"
baseDir="${cmdDir%/*}"

# Call through to the `eslint` that got built by the main ESLint dependency,
# prepending options to get it to find the plugins it was built with and to
# put its cache in an appropriate place.
exec "${baseDir}/lib/node_modules/.bin/eslint" \
    --resolve-plugins-relative-to "${baseDir}/lib" \
    --cache --cache-location "${baseDir}/cache" \
    "$@"
